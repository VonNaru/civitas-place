<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civitas Market</title>
    <link rel="stylesheet" href="/static/css/home.css">
</head>
<body>

    <header>
        <div class="container">
            <a href="/Home_pages.html">
                <img src="/static/pcture/Logo.png" alt="">
            </a>
            <nav>
                <a href="/Dasboard.html" style="text-decoration: none;"><button class="nav-button">Dashboard</button></a>
                <a href="/Cart.html" style="text-decoration: none;"><button class="nav-button cart">Keranjang</button></a>
                
                {% if session.get('user_name') %}
                <details class="user-menu-details">
                    <summary>{{ session.get('user_name') }} â–¼</summary>
                    <div class="dropdown-menu">
                        <a href="/OrderHistory.html">ðŸ‘¤ History</a>
                        <form method="POST" action="/logout">
                            <button type="submit" class="logout-btn">ðŸšª Logout</button>
                        </form>
                    </div>
                </details>
                {% endif %}
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            
            <div class="product-grid">
                {% for pid, product in products.items() %}
                    {% if product.stock > 0 %}
                    <div class="product-card">
                        <img src="{{ product.image }}" alt="{{ product.name }}" onerror="this.src='/static/pcture/default.svg'">
                        <div class="product-info">
                            <h3>{{ product.name }}</h3>
                            <p class="price">Rp {{ '{:,.0f}'.format(product.price) }}</p>
                            <p class="stock">Stok: {{ product.stock }}</p>
                            <a href="/product/{{ pid }}" class="buy-button">Lihat Detail</a>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
                
                <!-- Jika tidak ada produk -->
                {% if not products %}
                <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <h3>Belum ada produk tersedia</h3>
                    <p>Admin dapat menambahkan produk melalui dashboard</p>
                </div>
                {% endif %}
            </div>


        </div>
    </main>

    <footer>
    </footer>

</body>
</html>